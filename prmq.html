<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PRMQ 기억력 자가검사</title>
  <style>
    body {
      font-family: "Noto Sans KR", "Apple SD Gothic Neo", sans-serif;
      margin: 20px auto;
      max-width: 900px;
      line-height: 1.6;
    }
    h1 { text-align: center; margin-bottom: 0.5em; }
    .note { font-size: 0.9rem; color: #444; margin-bottom: 1.5em; text-align: center; }
    .question {
      background: #fafafa;
      border-radius: 8px;
      padding: 10px 15px;
      margin-bottom: 12px;
      border: 1px solid #eee;
    }
    .choices label { margin-right: 10px; }
    button {
      padding: 10px 18px;
      margin-top: 10px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }
    #calcBtn { background-color: #4CAF50; color: white; }
    #resetBtn { background-color: #ccc; color: #333; margin-left: 8px; }
    .result {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      font-size: 1.1rem;
      text-align: center;
    }
    .ok { background: #e6ffea; border: 1px solid #b7f0c9; }
    .no { background: #fff1f0; border: 1px solid #f1b3b3; }
  </style>
</head>
<body>
  <h1>PRMQ 기억력 자가검사</h1>
  <p class="note">각 문항에 대해 평소 자신의 상태에 가장 가까운 정도를 선택해주세요.<br>
  총점이 <strong>35점 이상</strong>이면 본 임상연구 참여 대상에 해당합니다.</p>

  <form id="prmqForm">
    <div id="questions"></div>

    <div style="text-align:center;">
      <button type="button" id="calcBtn">점수 계산</button>
      <button type="button" id="resetBtn">초기화</button>
    </div>
  </form>

  <div id="output" class="result" style="display:none;"></div>

  <script>
    const questions = [
      "잠시 후 무엇을 해야겠다고 마음을 먹고 나서 잊어버리는 경우가 있습니까?",
      "전에 가본 적이 있는 장소인데, 기억이 안 나는 경우가 있습니까?",
      "조금 있다가 해야 할 일이 있는데, 그 일 혹은 그와 관련된 물건을 직접 보면서도 잊어버리는 경우가 있습니까? (예: 약 봉지를 보고도 약 먹는 일을 잊어버리는 경우)",
      "몇 분 전에 들었던 이야기를 잊어버리는 경우가 있습니까?",
      "달력이나 수첩에 적어놓지 않거나 누가 말해 주지 않으면, 약속을 잊어버리는 경우가 있습니까?",
      "TV나 라디오에서 장면이 바뀌면, 출연자를 잘 알아보지 못 하는 경우가 있습니까?",
      "사려고 했던 물건인데 시장에 가서 그 물건을 보고도 잊어버리고 안 사는 경우가 있습니까?",
      "며칠 전에 있었던 일이 잘 기억나지 않는 경우가 있습니까?",
      "예전에 말한 적이 있는데, 똑같은 사람에게 같은 말을 되풀이해서 하는 경우가 있습니까?",
      "나가기 전에는 그 물건을 갖고 나가야겠다고 생각해놓고, 잠시 후에는 그 물건을 보면서도 방에 그냥 두고 나오는 경우가 있습니까?",
      "안경이나 신문 같은 물건을 어디에 두었는지 잊어버리는 경우가 있습니까?",
      "어떤 물건이나 말을 전해달라고 부탁을 받았는데, 상대방을 보면서도 잊어버려 전해주지 못 하는 경우가 있습니까?",
      "예전에 본 적이 있는 장면이나 물건인데, 지금 다시 보면서도 예전에 봤었다는 사실을 기억하지 못 하는 경우가 있습니까?",
      "친구나 친척에게 전화를 했지만 연락이 닿지 않았을 때, 다시 전화 거는 것을 잊어버리는 경우가 있습니까?",
      "어제 텔레비전에서 무엇을 봤는지 잊어버리는 경우가 있습니까?",
      "몇 분 전에는 해야 할 말을 생각해 놓고서, 상대방에게 그 말을 하는 것을 잊어버리는 경우가 있습니까?"
    ];

    const labels = ["전혀 아님", "아주 가끔", "가끔", "자주", "매우 자주"];
    const cutoff = 35;

    const container = document.getElementById("questions");
    questions.forEach((q, i) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `
        <div><strong>${i + 1}. </strong>${q}</div>
        <div class="choices" style="margin-top:6px;">
          ${labels.map((label, idx) =>
            `<label><input type="radio" name="q${i+1}" value="${idx+1}"> ${label} (${idx+1})</label>`
          ).join(" ")}
        </div>
      `;
      container.appendChild(div);
    });

    function calculateScore() {
      let total = 0;
      for (let i=1; i<=questions.length; i++) {
        const radios = document.getElementsByName("q"+i);
        let answered = false;
        for (const r of radios) {
          if (r.checked) {
            total += Number(r.value);
            answered = true;
            break;
          }
        }
        if (!answered) return {ok:false, message:`${i}번 문항이 체크되지 않았습니다.`};
      }
      return {ok:true, total};
    }

    document.getElementById("calcBtn").addEventListener("click", ()=>{
      const result = calculateScore();
      const out = document.getElementById("output");
      out.style.display = "block";
      if (!result.ok) {
        out.className = "result no";
        out.innerHTML = `<strong>체크 누락:</strong> ${result.message}`;
        return;
      }
      const total = result.total;
      if (total >= cutoff) {
        out.className = "result ok";
        out.innerHTML = `<strong>총점 ${total}점</strong><br>기준(${cutoff}점 이상)을 충족합니다.<br>
        임상연구 참여 대상에 해당합니다.<br><br>
        <button onclick="location.href='#'" style="background:#007bff;color:white;">참여신청 페이지로 이동</button>`;
      } else {
        out.className = "result no";
        out.innerHTML = `<strong>총점 ${total}점</strong><br>기준(${cutoff}점)에 미달합니다.<br>현재로서는 연구 참여 대상에 해당하지 않습니다.`;
      }
    });

    document.getElementById("resetBtn").addEventListener("click", ()=>{
      document.getElementById("prmqForm").reset();
      const out = document.getElementById("output");
      out.style.display = "none";
      out.innerHTML = "";
    });
  </script>
</body>
</html>
